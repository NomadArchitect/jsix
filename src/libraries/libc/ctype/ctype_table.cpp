#include <ctype.h>
#include <stdint.h>

namespace {

// Only implemented for the "C" locale
uint16_t locale_c_table[] = {
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,

//    0     1     2     3     4     5     6     7     8     9     a     b     c     d     e     f
    0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x1a0,0x0a0,0x0a0,0x0a0,0x0a0,0x200,0x200, // 0
    0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200,0x200, // 1
    0x160,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0, // 2
    0x8d8,0x8d8,0x8d8,0x8d8,0x8d8,0x8d8,0x8d8,0x8d8,0x8d8,0x8d8,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0, // 3
    0x4a0,0x8d5,0x8d5,0x8d5,0x8d5,0x8d5,0x8d5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5, // 4
    0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x8c5,0x4a0,0x4a0,0x4a0,0x4a0,0x4a0, // 5
    0x4a0,0x8d6,0x8d6,0x8d6,0x8d6,0x8d6,0x8d6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6, // 6
    0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x8c6,0x4a0,0x4a0,0x4a0,0x4a0,0x200, // 7

    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
    0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,0x000,
};


} // namespace

unsigned short *__ctype_b = locale_c_table + 128;

extern "C" {

const unsigned short **
__ctype_b_loc(void)
{
    return (const unsigned short **)&__ctype_b;
}

#undef  isalnum( ch )
#undef  isalpha( ch )
#undef  islower( ch )
#undef  isupper( ch )
#undef  isdigit( ch )
#undef isxdigit( ch )
#undef  iscntrl( ch )
#undef  isgraph( ch )
#undef  isspace( ch )
#undef  isblank( ch )
#undef  isprint( ch )
#undef  ispunct( ch )

#define __ctype_impl(flag) int is##flag (int ch) { return __ctype_b[ch] | __is_##flag; }

__ctype_impl(alnum)
__ctype_impl(alpha)
__ctype_impl(lower)
__ctype_impl(upper)
__ctype_impl(digit)
__ctype_impl(xdigit)
__ctype_impl(cntrl)
__ctype_impl(graph)
__ctype_impl(space)
__ctype_impl(blank)
__ctype_impl(print)
__ctype_impl(punct)

} // extern "C"
